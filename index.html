<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RecruitPro Assessment - Enterprise Werving Analyse | RecruitIn</title>
    <meta name="description" content="Professionele recruitment assessment tool voor Nederlandse bedrijven. Krijg inzicht in je wervingsproces en concrete verbeteradviezen.">
    <meta name="keywords" content="recruitment, werving, assessment, HR, personeel, vacatures, RecruitIn">
    <meta name="author" content="RecruitIn - Wouter Arts">
    
    <link rel="icon" href="data:;base64,=">
    
    <style>
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        .card {
            background: white;
            border-radius: 20px;
            padding: 40px;
            margin: 20px 0;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }

        .hidden { 
            display: none !important; 
        }

        .gradient-bg {
            background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
            color: white;
        }

        .debug-log {
            background-color: #f0f0f0;
            border: 1px solid #ccc;
            padding: 10px;
            margin-top: 20px;
            font-family: monospace;
            max-height: 200px;
            overflow-y: auto;
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: #4CAF50;
            color: white;
            padding: 15px;
            border-radius: 5px;
            z-index: 1000;
            display: none;
        }

        .progress-bar {
            background: #f1f5f9;
            height: 8px;
            border-radius: 4px;
            margin: 20px 0;
        }

        .progress-fill {
            background: linear-gradient(90deg, #667eea, #764ba2);
            height: 100%;
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        /* Responsive form styling */
        .form-input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .submit-button {
            width: 100%;
            padding: 12px;
            background-color: #f97316;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .submit-button:hover {
            background-color: #ea580c;
        }
    </style>
</head>
<body>
    <!-- Debug Log Container -->
    <div id="debug-log" class="debug-log">üêû Debug Log Initiated</div>

    <!-- Notification Container -->
    <div id="notification" class="notification"></div>

    <div class="container">
        <!-- Progress Bar -->
        <div class="progress-bar" id="progressBar">
            <div class="progress-fill" id="progressFill" style="width: 0%"></div>
        </div>
        <div class="progress-text" id="progressText">Stap 1 van 6</div>

        <!-- Welcome Screen -->
        <div class="card" id="welcome-screen">
            <h1 class="intro-title">RecruitPro Enterprise</h1>
            <p class="intro-subtitle">Geavanceerde Werving Analyse & Strategisch Advies</p>
            
            <button 
                onclick="startAssessment()" 
                class="gradient-bg hover:opacity-90 text-white px-8 py-4 rounded-xl font-semibold text-lg shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300 flex items-center gap-3 mx-auto card-hover pulse"
                id="start-btn"
            >
                üöÄ Start Enterprise Assessment (5 minuten)
            </button>
        </div>

        <!-- Assessment Screen -->
        <div class="card hidden" id="assessment-screen">
            <div id="assessmentHeader">
                <h2 class="intro-title">Enterprise Recruitment Intelligence</h2>
                <p class="intro-subtitle" id="questionSubtitle">Vraag <span id="questionNumber">1</span> van 19</p>
            </div>
            
            <div id="questionContainer">
                <h3 id="questionText" class="text-2xl font-semibold mb-4"></h3>
                <div id="questionHelp" class="bg-orange-50 border-l-4 border-orange-500 p-4 rounded-r-lg mb-6"></div>
                
                <div id="optionsContainer" class="grid gap-3"></div>
            </div>
        </div>

        <!-- Contact Screen -->
        <div class="card hidden" id="contact-screen">
            <h2 class="intro-title">Ontvang Je Persoonlijke Rapport</h2>
            <form id="contactForm">
                <input 
                    type="text" 
                    id="contact-name" 
                    placeholder="Naam *" 
                    class="form-input" 
                    required
                >
                <input 
                    type="email" 
                    id="contact-email" 
                    placeholder="Email *" 
                    class="form-input" 
                    required
                >
                <input 
                    type="tel" 
                    id="contact-phone" 
                    placeholder="Telefoonnummer *" 
                    class="form-input" 
                    required
                >
                <input 
                    type="text" 
                    id="contact-company" 
                    placeholder="Bedrijfsnaam *" 
                    class="form-input" 
                    required
                >
                <button 
                    type="submit" 
                    class="submit-button"
                    onclick="submitContact(event)"
                >
                    üìä Ontvang Mijn Rapport
                </button>
            </form>
        </div>

        <!-- Success Screen -->
        <div class="card hidden" id="success-screen">
            <div class="text-center">
                <h2 class="text-3xl font-bold text-green-600 mb-4">Assessment Voltooid! üéâ</h2>
                <p class="mb-6">Bedankt voor het voltooien van de RecruitPro Enterprise Assessment.</p>
                <p>We nemen binnen 24 uur contact met je op.</p>
            </div>
        </div>
    </div>

    <script>
        // Debug Logging Functie
        function debugLog(message) {
            const logContainer = document.getElementById('debug-log');
            const logEntry = document.createElement('div');
            logEntry.textContent = `üîç ${new Date().toLocaleTimeString()}: ${message}`;
            logContainer.appendChild(logEntry);
            logContainer.scrollTop = logContainer.scrollHeight;
            console.log(message);
        }

        // Globale Error Handler
        window.addEventListener('error', function(event) {
            debugLog(`‚ùå ERROR: ${event.message} at ${event.filename}:${event.lineno}`);
            showNotification(`Fout: ${event.message}`, 'error');
        });

        // Notification Functie
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.style.display = 'block';
            notification.style.backgroundColor = type === 'success' ? '#4CAF50' : '#F44336';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 5000);
        }

        // Vragen Array (volledig)
        const questions = [
            {
                text: "In welke sector is jouw bedrijf actief?",
                help: "Dit helpt ons om je te benchmarken tegen soortgelijke bedrijven in jouw branche en specifieke sector insights te geven.",
                options: [
                    "üèóÔ∏è Bouw & Constructie",
                    "‚ö° Installatietechniek (W/E/Klimaat)",
                    "üîß Metaalbewerking & Industrie",
                    "‚öôÔ∏è Machinebouw & Equipment",
                    "üíª High-tech & Elektronica",
                    "üìã Andere technische sector"
                ]
            },
            // Overige vragen kunnen hier worden toegevoegd
        ];

        // Assessment Variabelen
        let currentQuestionIndex = 0;
        let answers = {};
        let startTime;

        // Webhook Export Functie
        function submitContact(event) {
            event.preventDefault();
            
            const contactData = {
                name: document.getElementById('contact-name').value,
                email: document.getElementById('contact-email').value,
                phone: document.getElementById('contact-phone').value,
                company: document.getElementById('contact-company').value,
                answers: answers,
                completionTime: Math.round((new Date() - startTime) / 1000),
                timestamp: new Date().toISOString(),
                source: 'RecruitPro Assessment',
                browserInfo: {
                    userAgent: navigator.userAgent,
                    platform: navigator.platform
                }
            };

            // Uitgebreide logging
            console.log('üöÄ Webhook Payload:', JSON.stringify(contactData, null, 2));
            debugLog('Verzenden webhook data...');

            // Timeout toevoegen voor robuustheid
            const controller = new AbortController();
            const timeoutId = setTimeout(() => controller.abort(), 10000); // 10 seconden timeout

            fetch('https://hooks.zapier.com/hooks/catch/23933997/uuj2v4y/', {
                method: 'POST',
                signal: controller.signal,
                headers: {
                    'Content-Type': 'application/json',
                    'Access-Control-Allow-Origin': '*'
                },
                body: JSON.stringify(contactData)
            })
            .then(response => {
                clearTimeout(timeoutId);
                debugLog(`‚úÖ Webhook Response Status: ${response.status}`);
                return response.text();
            })
            .then(responseText => {
                debugLog(`‚úÖ Webhook Response: ${responseText}`);
                
                // Ga naar success scherm
                document.getElementById('contact-screen').classList.add('hidden');
                document.getElementById('success-screen').classList.remove('hidden');
                
                showNotification('Assessment succesvol verzonden!');
            })
            .catch(error => {
                console.error('‚ùå Gedetailleerde Webhook Error:', {
                    name: error.name,
                    message: error.message,
                    stack: error.stack
                });

                // Meer informatieve foutmelding
                const errorMessage = error.name === 'AbortError' 
                    ? 'Verzending duurt te lang. Controleer uw internetverbinding.' 
                    : `Verzending mislukt: ${error.message}`;
                
                debugLog(`‚ùå Webhook Error: ${errorMessage}`);
                showNotification(errorMessage, 'error');
            });
        }

        // Start Assessment Functie
        function startAssessment() {
            debugLog('üöÄ Start Assessment aangeroepen');
            startTime = new Date();
            
            document.getElementById('welcome-screen').classList.add('hidden');
            document.getElementById('assessment-screen').classList.remove('hidden');
            
            showQuestion(0);
            updateProgressBar();
            showNotification('Assessment gestart!');
        }

        // Vraag Tonen Functie
        function showQuestion(index) {
            debugLog(`‚ùì Tonen vraag ${index + 1}`);
            const question = questions[index];
            
            document.getElementById('questionNumber').textContent = index + 1;
            document.getElementById('questionText').textContent = question.text;
            document.getElementById('questionHelp').innerHTML = `<p class="text-slate-700 text-sm">üí° ${question.help}</p>`;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = question.options.map((option, optionIndex) => `
                <button 
                    class="p-4 rounded-xl border-2 text-left transition-all duration-300 hover:border-orange-500 hover:bg-orange-50 hover:-translate-y-0.5 border-slate-200 bg-white"
                    onclick="selectOption(${index}, ${optionIndex})"
                >
                    ${option}
                </button>
            `).join('');

            updateProgressBar();
        }

        // Optie Selecteren Functie
        function selectOption(questionIndex, optionIndex) {
            debugLog(`‚úÖ Optie geselecteerd: Vraag ${questionIndex + 1}, Optie ${optionIndex}`);
            answers[questionIndex] = optionIndex;
            
            if (questionIndex < questions.length - 1) {
                currentQuestionIndex++;
                showQuestion(currentQuestionIndex);
            } else {
                // Laatste vraag - ga naar contact scherm
                document.getElementById('assessment-screen').classList.add('hidden');
                document.getElementById('contact-screen').classList.remove('hidden');
            }
        }

        // Progress Bar Updaten
        function updateProgressBar() {
            const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
            document.getElementById('progressFill').style.width = `${progress}%`;
            document.getElementById('progressText').textContent = `Stap ${currentQuestionIndex + 1} van ${questions.length}`;
        }

        // DOM Loaded Event
        document.addEventListener('DOMContentLoaded', function() {
            debugLog('üåê DOM Volledig Geladen');
        });
    </script>
</body>
</html>
